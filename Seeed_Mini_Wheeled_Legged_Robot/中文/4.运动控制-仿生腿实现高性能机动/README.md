## 第4章 仿生腿实现高性能机动

本章节重点讲解如何利用**仿生并联腿的 X 轴控制能力**，实现超越普通平衡车的**瞬间刹车**与**高机动性**。

### 一、 核心概念：从 Y 轴到 X 轴的跨越

在之前的课程中，我们主要利用逆解函数控制足端的 **Y 坐标**（实现腿部伸缩、高度控制和地形自适应）。现在我们将启用 **X 坐标控制**：

* **X 坐标控制**：控制足端相对于机身重心的前后位移。

* **物理效应**：改变 X 坐标会使重心投影偏离足端，产生一个**横向分力**。

### 二、 物理原理：横向分力与加减速

通过调整足端 X 坐标，我们可以人为地改变机器人的受力状态，让机器人完成瞬间刹车和快速加速：

![](<images/轮足机器人 运动控制 学习教程-image-26.png>)



> **轮组机器人为什么比普通平衡车有更强的运动能力？**
>
> 轮组机器人与普通平衡车的核心区别在于其具备灵活的仿生并联腿，实现了从单一轮力矩控制到多维度重心主动控制的跨越。普通平衡车受限于刚性结构只能被动维持平衡，而轮组机器人通过控制足端的X轴（前后）和Y轴（上下）位移，不仅能利用自加量算法在复杂地形中动态调平机身，还能在刹车瞬间通过重心位移产生横向分力辅助减速，从而在地形自适应、瞬间刹车性能及运动稳定性上实现对传统平衡车的全方位超越。

![](<images/轮足机器人 运动控制 学习教程-image-27.png>)

### 三、 算法实现：腿部辅助运动控制

为了让机器人动态地辅助刹车或加速，需要一套算法将**速度误差**转化为**足端偏移量**。

![](<images/轮足机器人 运动控制 学习教程-image-28.png>)



**控制公式**

$$X = -Kp\_x \times (targetSpeed - speedAvg)$$

* **$targetSpeed$（期望速度）**：由遥控器或程序设定的目标值。

* **$speedAvg$（平均轮速）**：两侧轮速传感器反馈的当前真实速度。

* **$Kp\_x$（转换系数）**：决定了速度误差转化为腿部动作的灵敏度。

**实例分析：瞬间刹车**

假设机器人**轮速**为正以 $10$ rad/s 前进，此时突然想要刹停（$targetSpeed = 0$）：

1. **计算误差**：$(0 - 10) = -10$。

2. **计算位移**：若 $Kp\_x = 2$，则 $X = -2 \times (-10) = 20$ 。

3. **物理动作**：腿部迅速向前伸出$20$mm，机身重心后移，产生强大的向后分力辅助减速。

4. **动态收回**：随着车速降低，$speedAvg$减小，$X$值也随之自动减小。当完全刹停时，$X$回到$0$，腿部收回。

![](<images/轮足机器人 运动控制 学习教程-image-29.png>)

> &#x20;lesson9\_enhance / src / main.cpp&#x20;
>
> 代码位置位于逆运动之前，和足端Y解算放在一起，将期望末端位置X，Y一起通过逆运动学解算算出期望舵机关节位置。

![](<images/轮足机器人 运动控制 学习教程-image-30.png>)


